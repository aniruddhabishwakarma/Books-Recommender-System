{% extends 'base.html' %}

{% block title %}{{ book.title }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-4">
            {% if book.thumbnail %}
                <img src="{{ book.thumbnail }}" class="img-fluid rounded shadow" alt="{{ book.title }}">
            {% else %}
                <p>No image available</p>
            {% endif %}
        </div>
        <div class="col-md-8">
            <h2>{{ book.title }}</h2>
            <h5 class="text-muted">by {{ book.authors }}</h5>
            <p><strong>Category:</strong> {{ book.categories }}</p>
            <p><strong>Publisher:</strong> {{ book.publisher }}</p>
            <p><strong>Published Date:</strong> {{ book.published_date }}</p>
            <p><strong>Description:</strong> {{ book.description }}</p>

            {% if book.price and book.currency %}
                <p><strong>Price:</strong> {{ book.price }} {{ book.currency }}</p>
            {% else %}
                <p><strong>Price:</strong> Not available</p>
            {% endif %}

            <a href="{{ book.info_link }}" target="_blank" class="btn btn-primary mt-3">More Info</a>
            <a href="{% url 'home' %}" class="btn btn-secondary mt-3">Back to Home</a>

            {% if user.is_authenticated %}
                {% if is_favorited %}
                    <a href="{% url 'remove_favorite' book.id %}" class="btn btn-danger mt-3">Remove from Favorites ‚ù§Ô∏è</a>
                {% else %}
                    <a href="{% url 'add_favorite' book.id %}" class="btn btn-success mt-3">Add to Favorites üíñ</a>
                {% endif %}
            {% else %}
                <p class="text-muted mt-3">üîí <a href="{% url 'login' %}">Login</a> to save favorites.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
